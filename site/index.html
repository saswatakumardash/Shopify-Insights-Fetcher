<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shopify Insights - Store Analysis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
      :root {
        /* GitHub Color System */
        --color-accent-fg: #2f81f7;
        --color-accent-emphasis: #1f6feb;
        --color-success-fg: #3fb950;
        --color-danger-fg: #f85149;
        --color-warning-fg: #d29922;
        --color-done-fg: #a855f7;
        
        /* Dark Theme */
        --color-canvas-default: #0d1117;
        --color-canvas-overlay: #161b22;
        --color-canvas-inset: #010409;
        --color-canvas-subtle: #21262d;
        
        --color-fg-default: #f0f6fc;
        --color-fg-muted: #7d8590;
        --color-fg-subtle: #6e7681;
        --color-fg-on-emphasis: #ffffff;
        
        --color-border-default: #30363d;
        --color-border-muted: #21262d;
        --color-border-subtle: #f0f6fc1a;
        
        --color-neutral-emphasis-plus: #6e7681;
        --color-neutral-emphasis: #6e7681;
        --color-neutral-muted: rgba(110, 118, 129, 0.4);
        --color-neutral-subtle: rgba(110, 118, 129, 0.1);
        
        /* Shadows */
        --color-shadow-small: 0 1px 0 rgba(1, 4, 9, 0.04);
        --color-shadow-medium: 0 3px 6px rgba(1, 4, 9, 0.12);
        --color-shadow-large: 0 8px 24px rgba(1, 4, 9, 0.12);
        --color-shadow-extra-large: 0 12px 28px rgba(1, 4, 9, 0.15);
        
        /* Typography */
        --base-size-4: 0.25rem;
        --base-size-8: 0.5rem;
        --base-size-12: 0.75rem;
        --base-size-16: 1rem;
        --base-size-20: 1.25rem;
        --base-size-24: 1.5rem;
        --base-size-32: 2rem;
        --base-size-40: 2.5rem;
        --base-size-48: 3rem;
        --base-size-64: 4rem;
        
        /* Fonts */
        --fontStack-system: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
        --fontStack-sansSerif: Inter, var(--fontStack-system);
        --fontStack-monospace: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
      }
      
      [data-theme="light"] {
        --color-canvas-default: #ffffff;
        --color-canvas-overlay: #f6f8fa;
        --color-canvas-inset: #f6f8fa;
        --color-canvas-subtle: #f6f8fa;
        
        --color-fg-default: #1f2328;
        --color-fg-muted: #656d76;
        --color-fg-subtle: #6e7681;
        
        --color-border-default: #d1d9e0;
        --color-border-muted: #d8dee4;
        --color-border-subtle: #d1d9e0b3;
        
        --color-neutral-emphasis-plus: #656d76;
        --color-neutral-emphasis: #656d76;
        --color-neutral-muted: rgba(175, 184, 193, 0.2);
        --color-neutral-subtle: rgba(175, 184, 193, 0.1);
      }
      
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      
      body {
        font-family: var(--fontStack-sansSerif);
        background-color: var(--color-canvas-default);
        color: var(--color-fg-default);
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        word-wrap: break-word;
      }
      
      /* Header */
      .Header {
        background: var(--color-canvas-default);
        border-bottom: 1px solid var(--color-border-muted);
        position: sticky;
        top: 0;
        z-index: 32;
        backdrop-filter: blur(12px);
        background: rgba(13, 17, 23, 0.8);
      }
      
      .Header-item {
        display: flex;
        align-items: center;
        padding: var(--base-size-16) var(--base-size-24);
        justify-content: space-between;
        max-width: 1280px;
        margin: 0 auto;
      }
      
      .Header-link {
        display: flex;
        align-items: center;
        gap: var(--base-size-16);
        color: var(--color-fg-default);
        text-decoration: none;
        font-weight: 600;
        font-size: 18px;
      }
      
            .Header-logo {
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        overflow: hidden;
      }
      
      .Header-logo:hover {
        transform: scale(1.1);
      }
      
      .Header-logo img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        filter: drop-shadow(0 0 4px rgba(47, 129, 247, 0.4));
        border-radius: 8px;
      }
      
      #headerLogo {
        opacity: 1;
      }
      
      /* Connection Status */
      .ConnectionStatus {
        display: flex;
        align-items: center;
        margin-left: auto;
        margin-right: var(--base-size-16);
      }
      
      .Status-badge {
        font-size: 12px;
        padding: 2px 8px;
        border-radius: 10px;
        font-weight: 500;
      }
      
      .Status-badge--checking {
        background-color: var(--color-neutral-muted);
        color: var(--color-fg-default);
      }
      
      .Status-badge.connected {
        background-color: var(--color-success-fg);
        color: var(--color-fg-on-emphasis);
      }
      
      .Status-badge.disconnected {
        background-color: var(--color-danger-fg);
        color: var(--color-fg-on-emphasis);
      }
      
      /* Theme Toggle */
      .ThemeToggle {
        display: flex;
        align-items: center;
      }
      
      .Button--sm {
        padding: var(--base-size-4) var(--base-size-8);
        font-size: 12px;
      }
      
      .theme-icon {
        transition: transform 0.5s ease;
      }
      
      /* Container */
      .Container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 var(--base-size-24);
      }
      
      /* Hero Section */
      .Hero {
        text-align: center;
        padding: var(--base-size-64) 0;
        background: linear-gradient(135deg, var(--color-canvas-default) 0%, var(--color-canvas-subtle) 100%);
        position: relative;
        overflow: hidden;
      }
      
      .Hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(ellipse at center, var(--color-accent-emphasis)10 0%, transparent 50%);
        opacity: 0.1;
        pointer-events: none;
        animation: pulse 15s ease infinite;
      }
      
      @keyframes pulse {
        0% { opacity: 0.05; }
        50% { opacity: 0.2; }
        100% { opacity: 0.05; }
      }
      
      .Hero-content {
        position: relative;
        z-index: 1;
      }
      
      .Hero-title {
        font-size: clamp(2.5rem, 5vw, 4rem);
        font-weight: 700;
        line-height: 1.2;
        margin-bottom: var(--base-size-16);
        background: linear-gradient(135deg, var(--color-fg-default) 0%, var(--color-fg-muted) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: gradient 8s ease infinite;
        background-size: 200% 200%;
      }
      
      @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      .Hero-subtitle {
        font-size: var(--base-size-20);
        color: var(--color-fg-muted);
        max-width: 600px;
        margin: 0 auto var(--base-size-32);
        line-height: 1.6;
      }
      
      .Hero-badges {
        display: flex;
        gap: var(--base-size-12);
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: var(--base-size-32);
      }
      
      .Badge {
        display: inline-flex;
        align-items: center;
        gap: var(--base-size-4);
        padding: var(--base-size-4) var(--base-size-8);
        background: var(--color-neutral-subtle);
        border: 1px solid var(--color-border-subtle);
        border-radius: 12px;
        font-size: 12px;
        font-weight: 500;
        color: var(--color-fg-muted);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        animation: badgeFadeIn 0.5s ease forwards;
        opacity: 0;
      }
      
      .Badge:hover {
        transform: translateY(-2px);
        box-shadow: var(--color-shadow-medium);
      }
      
      .Badge:nth-child(1) { animation-delay: 0.1s; }
      .Badge:nth-child(2) { animation-delay: 0.3s; }
      .Badge:nth-child(3) { animation-delay: 0.5s; }
      
      @keyframes badgeFadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .Badge--primary {
        background: rgba(47, 129, 247, 0.1);
        border-color: var(--color-accent-fg);
        color: var(--color-accent-fg);
      }
      
      .Badge--success {
        background: rgba(63, 185, 80, 0.1);
        border-color: var(--color-success-fg);
        color: var(--color-success-fg);
      }
      
      .Badge--accent {
        background: rgba(47, 129, 247, 0.1);
        border-color: var(--color-accent-emphasis);
        color: var(--color-accent-emphasis);
      }
      
      /* Main Content */
      .Main {
        padding: var(--base-size-48) 0;
      }
      
      /* Card */
      .Card {
        background: var(--color-canvas-overlay);
        border: 1px solid var(--color-border-default);
        border-radius: 12px;
        padding: var(--base-size-32);
        box-shadow: var(--color-shadow-large);
        position: relative;
        overflow: hidden;
      }
      
      .Card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--color-border-subtle), transparent);
      }
      
      .Card-header {
        margin-bottom: var(--base-size-24);
      }
      
      .Card-title {
        font-size: var(--base-size-24);
        font-weight: 600;
        margin-bottom: var(--base-size-8);
        color: var(--color-fg-default);
      }
      
      .Card-description {
        color: var(--color-fg-muted);
        line-height: 1.5;
      }
      
      /* Form */
      .FormGroup {
        margin-bottom: var(--base-size-20);
      }
      
      .FormLabel {
        display: block;
        font-weight: 500;
        margin-bottom: var(--base-size-8);
        color: var(--color-fg-default);
        font-size: 14px;
      }
      
      .FormControl {
        width: 100%;
        padding: var(--base-size-12) var(--base-size-16);
        background: var(--color-canvas-inset);
        border: 1px solid var(--color-border-default);
        border-radius: 6px;
        color: var(--color-fg-default);
        font-size: 14px;
        font-family: inherit;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }
      
      .FormControl:focus {
        outline: none;
        border-color: var(--color-accent-emphasis);
        box-shadow: 0 0 0 3px rgba(47, 129, 247, 0.1);
      }
      
      .FormControl::placeholder {
        color: var(--color-fg-subtle);
      }
      
      textarea.FormControl {
        resize: vertical;
        min-height: 80px;
        font-family: var(--fontStack-monospace);
        font-size: 13px;
      }
      
      .FormRow {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: var(--base-size-16);
        align-items: end;
      }
      
      .FormRow .FormControl--narrow {
        max-width: 120px;
      }
      
      /* Checkbox */
      .FormCheckbox {
        display: flex;
        align-items: center;
        gap: var(--base-size-8);
        margin: var(--base-size-16) 0;
      }
      
      .FormCheckbox input[type="checkbox"] {
        width: auto;
        margin: 0;
      }
      
      /* Buttons */
      .Button {
        display: inline-flex;
        align-items: center;
        gap: var(--base-size-8);
        padding: var(--base-size-8) var(--base-size-16);
        border: 1px solid var(--color-border-default);
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.2s ease;
        font-family: inherit;
        position: relative;
        overflow: hidden;
      }
      
      .Button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transition: left 0.5s ease;
      }
      
      .Button:hover::before {
        left: 100%;
        animation: shimmer 1.5s infinite;
      }
      
      @keyframes shimmer {
        0% { left: -100%; }
        100% { left: 100%; }
      }
      
      .Button--primary {
        background: var(--color-accent-emphasis);
        border-color: rgba(240, 246, 252, 0.1);
        color: var(--color-fg-on-emphasis);
        box-shadow: var(--color-shadow-medium);
      }
      
      .Button--primary:hover {
        background: var(--color-accent-fg);
        transform: translateY(-1px);
        box-shadow: var(--color-shadow-large);
      }
      
      .Button--secondary {
        background: var(--color-canvas-overlay);
        color: var(--color-fg-default);
      }
      
      .Button--secondary:hover {
        background: var(--color-canvas-subtle);
        border-color: var(--color-border-default);
      }
      
      .Button--danger {
        background: var(--color-danger-fg);
        border-color: rgba(240, 246, 252, 0.1);
        color: var(--color-fg-on-emphasis);
      }
      
      .Button--danger:hover {
        background: #e5534b;
        transform: translateY(-1px);
      }
      
      .ButtonGroup {
        display: flex;
        gap: var(--base-size-12);
        align-items: center;
        margin-top: var(--base-size-20);
      }
      
      /* Results */
      .Results {
        margin-top: var(--base-size-32);
        display: none;
      }
      
      .Results.show {
        display: block;
      }
      
      .Results-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--base-size-16);
      }
      
      .Results-title {
        font-size: var(--base-size-20);
        font-weight: 600;
        color: var(--color-fg-default);
      }
      
      .CodeBlock {
        background: var(--color-canvas-inset);
        border: 1px solid var(--color-border-default);
        border-radius: 6px;
        padding: var(--base-size-16);
        font-family: var(--fontStack-monospace);
        font-size: 12px;
        white-space: pre-wrap;
        word-break: break-word;
        overflow-x: auto;
        color: var(--color-fg-default);
        line-height: 1.4;
      }
      
      .CodeBlock.error {
        color: var(--color-danger-fg);
        border-color: var(--color-danger-fg);
        background-color: rgba(248, 81, 73, 0.1);
      }
      
      /* Footer */
      .Footer {
        margin-top: var(--base-size-64);
        padding: var(--base-size-32) 0;
        border-top: 1px solid var(--color-border-muted);
        text-align: center;
      }
      
      .Footer-text {
        color: var(--color-fg-muted);
        font-size: 14px;
      }
      
      .Footer-link {
        color: var(--color-accent-emphasis);
        text-decoration: none;
      }
      
      .Footer-link:hover {
        text-decoration: underline;
      }
      
      /* API Settings */
      .ApiSettings {
        background: var(--color-canvas-overlay);
        border: 1px solid var(--color-border-default);
        border-radius: 6px;
        padding: var(--base-size-16);
        margin: var(--base-size-16) 0;
      }
      
      .ApiSettings summary {
        font-weight: 500;
        cursor: pointer;
        color: var(--color-fg-muted);
        margin-bottom: var(--base-size-12);
      }
      
      /* Responsive */
      @media (max-width: 768px) {
        .Header-item {
          padding: var(--base-size-12) var(--base-size-16);
        }
        
        .Container {
          padding: 0 var(--base-size-16);
        }
        
        .Hero {
          padding: var(--base-size-48) 0;
        }
        
        .Card {
          padding: var(--base-size-24);
        }
        
        .FormRow {
          grid-template-columns: 1fr;
        }
        
        .ButtonGroup {
          flex-direction: column;
          align-items: stretch;
        }
        
        .Hero-badges {
          justify-content: center;
        }
      }
      
      /* Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
      }
      
      .Hero-content {
        animation: fadeInUp 0.8s ease-out, float 6s ease-in-out infinite;
      }
      
      .Card {
        animation: fadeInUp 0.8s ease-out 0.2s both;
        position: relative;
        overflow: hidden;
      }
      
      .Card::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
        opacity: 0;
        transform: rotate(30deg);
        transition: opacity 1.5s ease;
        pointer-events: none;
      }
      
      .Card:hover::after {
        opacity: 0.4;
        animation: cardGlow 3s infinite;
      }
      
      @keyframes cardGlow {
        0% { opacity: 0; }
        50% { opacity: 0.05; }
        100% { opacity: 0; }
      }
      
      /* Loading states */
      .Button--loading {
        pointer-events: none;
        opacity: 0.7;
      }
      
      .Button--loading::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 16px;
        height: 16px;
        margin: -8px 0 0 -8px;
        border: 2px solid transparent;
        border-top: 2px solid currentColor;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
    <script>
      // API base for static hosting
      const API_BASE = localStorage.getItem('API_BASE') || (location.hostname.endsWith('.vercel.app') ? '' : 'http://localhost:8000');
      
      // Check if backend is available
      async function checkBackendConnection() {
        const connectionStatus = document.getElementById('connectionStatus');
        if (!connectionStatus) return;
        
        try {
          const response = await fetch(`${API_BASE}/health`, { 
            method: 'GET',
            headers: { 'Content-Type': 'application/json' },
            // Short timeout to avoid long waits
            signal: AbortSignal.timeout(3000)
          });
          
          if (response.ok) {
            connectionStatus.textContent = 'Connected';
            connectionStatus.classList.remove('Status-badge--checking', 'disconnected');
            connectionStatus.classList.add('connected');
            return true;
          } else {
            throw new Error('Backend responded with an error');
          }
        } catch (error) {
          connectionStatus.textContent = 'Disconnected';
          connectionStatus.classList.remove('Status-badge--checking', 'connected');
          connectionStatus.classList.add('disconnected');
          console.error('Backend connection error:', error);
          return false;
        }
      }
      
      // Check connection when page loads and periodically
      document.addEventListener('DOMContentLoaded', () => {
        checkBackendConnection();
        // Check connection every 30 seconds
        setInterval(checkBackendConnection, 30000);
      });
    </script>
  </head>
  <body>
    <!-- Header -->
    <header class="Header">
      <div class="Header-item">
        <a href="#" class="Header-link">
          <div id="logoContainer" class="Header-logo">
            <img id="headerLogo" src="./assets/logo512.png" alt="Shopify Insights" />
          </div>
          <span>Shopify Insights</span>
        </a>
        
        <div class="ConnectionStatus">
          <span id="connectionStatus" class="Status-badge Status-badge--checking">Checking...</span>
        </div>
        
        <div class="ThemeToggle">
          <button id="themeToggleBtn" class="Button Button--secondary Button--sm">
            <svg id="darkIcon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor" class="theme-icon">
              <path d="M9.598 1.591a.749.749 0 0 1 .785-.175 7.001 7.001 0 1 1-8.967 8.967.75.75 0 0 1 .961-.96 5.5 5.5 0 0 0 7.046-7.046.75.75 0 0 1 .175-.786Zm1.616 1.945a7 7 0 0 1-7.678 7.678 5.499 5.499 0 1 0 7.678-7.678Z"/>
            </svg>
            <svg id="lightIcon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor" class="theme-icon" style="display:none">
              <path d="M8 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Zm0-1.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm5.657-8.157a.75.75 0 0 1 0 1.061l-1.061 1.06a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.06-1.06a.75.75 0 0 1 1.06 0Zm-9.193 9.193a.75.75 0 0 1 0 1.06l-1.06 1.061a.75.75 0 1 1-1.061-1.06l1.06-1.061a.75.75 0 0 1 1.061 0ZM8 0a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0ZM3 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 3 8Zm13 0a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 16 8Zm-8 5a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13Zm1.536-13.536a.75.75 0 0 1 0 1.06L8.47 1.59a.767.767 0 0 1-1.061 0 .75.75 0 0 1 0-1.06L8.47.47a.75.75 0 0 1 1.066 0Zm-9.193 9.193a.75.75 0 0 1 0 1.06L1.276 10.8a.75.75 0 0 1-1.06-1.06l1.06-1.06a.75.75 0 0 1 1.067 0Z"/>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="Hero">
      <div class="Container">
        <div class="Hero-content">
          <h1 class="Hero-title">Shopify Store Intelligence</h1>
          <p class="Hero-subtitle">
            Unlock powerful insights from any Shopify store. 
            Extract products, policies, FAQs, social handles, and discover competitors instantly.
          </p>
          
          <div class="Hero-badges">
            <div class="Badge Badge--primary">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z"/>
              </svg>
              Shopify Insights
            </div>
            <div class="Badge Badge--accent">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 16a2 2 0 0 0 1.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 0 0 8 16ZM3 5a5 5 0 0 1 10 0v2.947c0 .05.015.098.042.139l1.703 2.555A1.519 1.519 0 0 1 13.482 13H2.518a1.516 1.516 0 0 1-1.263-2.36l1.703-2.554A.255.255 0 0 0 3 7.947Zm5-3.5A3.5 3.5 0 0 0 4.5 5v2.947c0 .346-.102.683-.294.97l-1.703 2.556a.017.017 0 0 0-.003.01l.001.006c0 .002.002.004.004.006l.006.004.007.001h10.964l.007-.001.006-.004.004-.006.001-.007a.017.017 0 0 0-.003-.01l-1.703-2.554a1.745 1.745 0 0 1-.294-.97V5A3.5 3.5 0 0 0 8 1.5Z"/>
              </svg>
              Instant Alerts
            </div>
            <div class="Badge Badge--success">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                <path d="M1.5 8a6.5 6.5 0 1 1 13 0 6.5 6.5 0 0 1-13 0ZM8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0ZM6.379 5.227A.25.25 0 0 0 6 5.442v5.117a.25.25 0 0 0 .379.214l4.264-2.559a.25.25 0 0 0 0-.428L6.379 5.227Z"/>
              </svg>
              Real-time Analysis
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content -->
    <main class="Main">
      <div class="Container">
        <div class="Card">
          <div class="Card-header">
            <h2 class="Card-title">Analyze Shopify Store</h2>
            <p class="Card-description">
              Enter a Shopify store URL to extract comprehensive insights including products, 
              policies, social media presence, and competitor analysis.
            </p>
          </div>
          
          <form id="analysisForm">
            <div class="FormRow">
              <div class="FormGroup">
                <label class="FormLabel" for="websiteUrl">Shopify Store URL</label>
                <input 
                  type="url" 
                  id="websiteUrl" 
                  name="website_url" 
                  class="FormControl" 
                  placeholder="https://example.myshopify.com" 
                  required 
                />
              </div>
              <div class="FormGroup">
                <label class="FormLabel" for="competitorLimit">Competitor Limit</label>
                <input 
                  type="number" 
                  id="competitorLimit" 
                  name="limit" 
                  class="FormControl FormControl--narrow" 
                  min="1" 
                  max="10" 
                  value="5" 
                />
              </div>
            </div>
            
            <div class="FormCheckbox">
              <input type="checkbox" id="fetchCompetitors" name="fetch_competitors" />
              <label for="fetchCompetitors">Auto-discover competitors using AI</label>
            </div>
            
            <div class="FormGroup">
              <label class="FormLabel" for="competitorUrls">Manual Competitor URLs (Optional)</label>
              <textarea 
                id="competitorUrls" 
                name="competitor_urls" 
                class="FormControl" 
                rows="3" 
                placeholder="Enter one URL per line:&#10;https://competitor1.com&#10;https://competitor2.myshopify.com"
              ></textarea>
            </div>

            <details class="ApiSettings">
              <summary>API Configuration</summary>
              <div class="FormGroup">
                <label class="FormLabel" for="apiBase">API Base URL</label>
                <input 
                  id="apiBase" 
                  type="url" 
                  class="FormControl" 
                  placeholder="https://your-api.example.com" 
                />
                <button id="saveApi" type="button" class="Button Button--secondary" style="margin-top: 8px;">
                  Save API Base
                </button>
              </div>
            </details>
            
            <div class="ButtonGroup">
              <button type="button" id="clearForm" class="Button Button--danger">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M11 1.75V3h2.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75ZM4.496 6.675l.66 6.6a.25.25 0 0 0 .249.225h5.19a.25.25 0 0 0 .249-.225l.66-6.6a.75.75 0 0 1 1.492.149l-.66 6.6A1.748 1.748 0 0 1 10.595 15h-5.19a1.75 1.75 0 0 1-1.741-1.575l-.66-6.6a.75.75 0 1 1 1.492-.15ZM6.5 1.75V3h3V1.75a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25Z"/>
                </svg>
                Delete
              </button>
              <button type="submit" class="Button Button--primary">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"/>
                </svg>
                Analyze Store
              </button>
            </div>
          </form>

          <!-- Results Section -->
          <div id="results" class="Results">
            <div class="Results-header">
              <h3 class="Results-title">Analysis Results</h3>
              <button id="copyResults" class="Button Button--secondary">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25v-7.5Z"/>
                  <path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25v-7.5Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25h-7.5Z"/>
                </svg>
                Copy JSON
              </button>
            </div>
            <pre id="jsonOutput" class="CodeBlock"></pre>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="Footer">
      <div class="Container">
        <p class="Footer-text">
          Made with ❤️ by <a href="https://skds.site" target="_blank" rel="noopener" class="Footer-link">Saswata Kumar Dash</a>. 
          Built with FastAPI.
        </p>
      </div>
    </footer>

    <script>
      // Theme management
      (function() {
        const key = 'theme';
        const saved = localStorage.getItem(key);
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const initial = saved || (prefersDark ? 'dark' : 'light');
        
        document.documentElement.setAttribute('data-theme', initial);
        const darkIcon = document.getElementById('darkIcon');
        const lightIcon = document.getElementById('lightIcon');
        
        function updateIcons(isDark) {
          darkIcon.style.display = isDark ? 'none' : 'block';
          lightIcon.style.display = isDark ? 'block' : 'none';
        }
        
        updateIcons(initial === 'dark');
        
        function setTheme(mode) {
          document.documentElement.setAttribute('data-theme', mode);
          localStorage.setItem(key, mode);
          updateIcons(mode === 'dark');
        }
        
        const themeToggleBtn = document.getElementById('themeToggleBtn');
        if (themeToggleBtn) {
          themeToggleBtn.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
            
            // Add rotation animation
            const icons = document.querySelectorAll('.theme-icon');
            icons.forEach(icon => {
              icon.style.transform = 'rotate(360deg)';
              setTimeout(() => {
                icon.style.transform = '';
              }, 500);
            });
          });
        }
        
        // Logo animation
        const logoContainer = document.getElementById('logoContainer');
        const headerLogo = document.getElementById('headerLogo');
        
        if (logoContainer && headerLogo) {
          // Add entrance animation for the logo
          logoContainer.style.opacity = '0';
          logoContainer.style.transform = 'scale(0.9)';
          
          // Check if image loads correctly
          headerLogo.onload = function() {
            console.log('Logo loaded successfully');
          };
          
          headerLogo.onerror = function() {
            console.error('Error loading logo');
            // Try different paths if there's an error
            const paths = [
              '/site/assets/logo512.png',
              'site/assets/logo512.png',
              '/assets/logo512.png',
              '../assets/logo512.png',
              './assets/logo512.png'
            ];
            
            let pathIndex = 0;
            const tryNextPath = () => {
              if (pathIndex < paths.length) {
                headerLogo.src = paths[pathIndex];
                pathIndex++;
              }
            };
            
            headerLogo.onerror = tryNextPath;
            tryNextPath();
          };
          
          // Show animation regardless of load state
          setTimeout(() => {
            logoContainer.style.transition = 'all 0.5s ease';
            logoContainer.style.opacity = '1';
            logoContainer.style.transform = 'scale(1.05)';
            
            setTimeout(() => {
              logoContainer.style.transform = 'scale(1)';
            }, 300);
          }, 100);
          
          // Add hover effect
          logoContainer.addEventListener('mouseenter', () => {
            if (headerLogo) {
              headerLogo.style.filter = 'drop-shadow(0 0 6px rgba(47, 129, 247, 0.6))';
            }
          });
          
          logoContainer.addEventListener('mouseleave', () => {
            if (headerLogo) {
              headerLogo.style.filter = 'drop-shadow(0 0 4px rgba(47, 129, 247, 0.4))';
            }
          });
        }
      })();

      // API base management
      document.getElementById('apiBase').value = API_BASE;
      document.getElementById('saveApi').addEventListener('click', () => {
        const value = document.getElementById('apiBase').value.trim();
        localStorage.setItem('API_BASE', value || '');
        alert('API base saved!');
      });

      // Form handling
      const form = document.getElementById('analysisForm');
      const results = document.getElementById('results');
      const jsonOutput = document.getElementById('jsonOutput');
      const copyBtn = document.getElementById('copyResults');
      const clearBtn = document.getElementById('clearForm');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const submitBtn = form.querySelector('button[type="submit"]');
        submitBtn.classList.add('Button--loading');
        submitBtn.disabled = true;
        
        results.style.display = 'none';
        jsonOutput.textContent = 'Analyzing store...';
        results.classList.add('show');

        const formData = new FormData(form);
        const url = formData.get('website_url');
        const fetchCompetitors = formData.get('fetch_competitors') === 'on';
        const competitorsText = (formData.get('competitor_urls') || '').toString().trim();
        const competitorUrls = competitorsText ? 
          competitorsText.split(/\n+/).map(s => s.trim()).filter(Boolean) : [];
        const limit = parseInt(formData.get('limit') || '5', 10) || 5;

        try {
          let payload = { website_url: url };
          let endpoint = API_BASE + '/api/insights';
          
          if (fetchCompetitors) {
            payload = { website_url: url, competitor_urls: competitorUrls, limit };
            endpoint = API_BASE + '/api/insights/competitors';
          }
          
          const response = await fetch(endpoint, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          
          const data = await response.json();
          
          // Show appropriate status message based on response
          if (!response.ok) {
            if (response.status === 401) {
              jsonOutput.textContent = `Error: The provided Shopify store URL is invalid or not accessible.`;
            } else if (response.status === 500) {
              jsonOutput.textContent = `Error: The server encountered an internal error while processing your request.`;
            } else {
              jsonOutput.textContent = `Error: ${data.detail || response.statusText || 'An unknown error occurred'}`;
            }
            // Add error styling
            jsonOutput.classList.add('error');
          } else {
            jsonOutput.textContent = JSON.stringify(data, null, 2);
            jsonOutput.classList.remove('error');
          }
          
        } catch (error) {
          if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {
            jsonOutput.textContent = `Backend connection error: The API service is currently unavailable.\n\nBackend available when needed. Contact saswata@skds.site`;
            jsonOutput.classList.add('error');
            // Update connection status
            document.getElementById('connectionStatus').classList.remove('connected');
            document.getElementById('connectionStatus').classList.add('disconnected');
            document.getElementById('connectionStatus').textContent = 'Disconnected';
          } else {
            jsonOutput.textContent = `Error: ${error.message}`;
            jsonOutput.classList.add('error');
          }
        } finally {
          submitBtn.classList.remove('Button--loading');
          submitBtn.disabled = false;
        }
      });

      copyBtn?.addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(jsonOutput.textContent || '');
          const originalText = copyBtn.innerHTML;
          copyBtn.innerHTML = '✓ Copied!';
          setTimeout(() => copyBtn.innerHTML = originalText, 2000);
        } catch (error) {
          console.error('Failed to copy:', error);
        }
      });

      clearBtn?.addEventListener('click', () => {
        form.reset();
        results.classList.remove('show');
      });
    </script>
  </body>
</html>
